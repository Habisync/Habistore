import{r as d,j as y}from"./components-DpluEorh.js";import{u as C}from"./ShopifyProvider-DWJBKkbi.js";function v(t){const{countryIsoCode:c,languageIsoCode:n}=C(),e=n.includes("_")?n.replace("_","-"):`${n}-${c}`;if(!e)throw new Error("useMoney(): Unable to get 'locale' from 'useShop()', which means that 'locale' was not passed to '<ShopifyProvider/>'. 'locale' is required for 'useMoney()' to work");const o=parseFloat(t.amount),{defaultFormatter:a,nameFormatter:l,narrowSymbolFormatter:i,withoutTrailingZerosFormatter:m,withoutCurrencyFormatter:u,withoutTrailingZerosOrCurrencyFormatter:g}=d.useMemo(()=>{const r={style:"currency",currency:t.currencyCode};return{defaultFormatter:s(e,r),nameFormatter:s(e,{...r,currencyDisplay:"name"}),narrowSymbolFormatter:s(e,{...r,currencyDisplay:"narrowSymbol"}),withoutTrailingZerosFormatter:s(e,{...r,minimumFractionDigits:0,maximumFractionDigits:0}),withoutCurrencyFormatter:s(e),withoutTrailingZerosOrCurrencyFormatter:s(e,{minimumFractionDigits:0,maximumFractionDigits:0})}},[t.currencyCode,e]),f=r=>r.type==="currency",p=d.useMemo(()=>({original:()=>t,currencyCode:()=>t.currencyCode,localizedString:()=>a().format(o),parts:()=>a().formatToParts(o),withoutTrailingZeros:()=>o%1===0?m().format(o):a().format(o),withoutTrailingZerosAndCurrency:()=>o%1===0?g().format(o):u().format(o),currencyName:()=>{var r;return((r=l().formatToParts(o).find(f))==null?void 0:r.value)??t.currencyCode},currencySymbol:()=>{var r;return((r=a().formatToParts(o).find(f))==null?void 0:r.value)??t.currencyCode},currencyNarrowSymbol:()=>{var r;return((r=i().formatToParts(o).find(f))==null?void 0:r.value)??""},amount:()=>a().formatToParts(o).filter(r=>["decimal","fraction","group","integer","literal"].includes(r.type)).map(r=>r.value).join("")}),[t,o,l,a,i,u,m,g]);return d.useMemo(()=>new Proxy(p,{get:(r,h)=>{var F;return(F=Reflect.get(r,h))==null?void 0:F.call(null)}}),[p])}const w=new Map;function s(t,c){const n=JSON.stringify([t,c]);return function(){let e=w.get(n);return e||(e=new Intl.NumberFormat(t,c),w.set(n,e)),e}}function M({data:t,as:c,withoutCurrency:n,withoutTrailingZeros:e,measurement:o,measurementSeparator:a="/",...l}){if(!S(t))throw new Error("<Money/> needs a valid 'data' prop that has 'amount' and 'currencyCode'");const i=v(t),m=c??"div";let u=i.localizedString;return(n||e)&&(n&&!e?u=i.amount:!n&&e?u=i.withoutTrailingZeros:u=i.withoutTrailingZerosAndCurrency),y.jsxs(m,{...l,children:[u,o&&o.referenceUnit&&y.jsxs(y.Fragment,{children:[a,o.referenceUnit]})]})}function S(t){return typeof t.amount=="string"&&!!t.amount&&typeof t.currencyCode=="string"&&!!t.currencyCode}export{M,v as u};
