import{r as m,m as G,j as i,h as Q,g as k,L as J,i as Y,u as ie}from"./components-DpluEorh.js";import{O as oe,o as le,X as ce}from"./index-D9Zn7Ol-.js";import{H as Z,T as ee,P as ue,S as de}from"./Text-DDUC__2Y.js";import{G as me}from"./Grid-CKau4Pvv.js";import{B as z}from"./Button-DLJUwG7J.js";import{P as fe}from"./ProductCard-Bay5aLU-.js";import{a as pe,b as te,c as ve}from"./Icon-D-RzneJA.js";import{a as xe}from"./hooks-AewHZe8F.js";import{l as E,o as he,U as T,y as C,b as ge,a as j,s as be,u as re,C as O,I as V,c as U,p as ne,d as ye,e as F,T as Ie,f as je,h as Se,g as Re,i as b,r as Ne,O as W,_ as we,M as X,D as se,A}from"./disclosure-DhV7NFrB.js";import{n as Pe}from"./use-owner-rEuyG75v.js";import{s as $e,u as Me,f as Ee,c as R}from"./use-text-value-DMvu1Mx-.js";import{g as Fe}from"./const-DYJb6-3l.js";import"./flatten-connection-BTqmuHGw.js";import"./ShopifyProvider-DWJBKkbi.js";import"./Link-BE_DgB92.js";import"./Image-CKmnK2hx.js";import"./Money-EMQwjQIk.js";function ke({container:e,accept:t,walk:a,enabled:n=!0}){let s=m.useRef(t),o=m.useRef(a);m.useEffect(()=>{s.current=t,o.current=a},[t,a]),E(()=>{if(!e||!n)return;let l=he(e);if(!l)return;let r=s.current,c=o.current,d=Object.assign(p=>r(p),{acceptNode:r}),f=l.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,d,!1);for(;f.nextNode();)c(f.currentNode)},[e,n,s,o])}var Te=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Te||{}),Ce=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ce||{}),Oe=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(Oe||{});function _(e,t=a=>a){let a=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=je(t(e.items.slice()),o=>o.dataRef.current.domRef.current),s=a?n.indexOf(a):null;return s===-1&&(s=null),{items:n,activeItemIndex:s}}let Le={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var a;let n=_(e),s=Ee(t,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:o=>o.id,resolveDisabled:o=>o.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeItemIndex:s,activationTrigger:(a=t.trigger)!=null?a:1}},3:(e,t)=>{let a=e.searchQuery!==""?0:1,n=e.searchQuery+t.value.toLowerCase(),s=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+a).concat(e.items.slice(0,e.activeItemIndex+a)):e.items).find(l=>{var r;return((r=l.dataRef.current.textValue)==null?void 0:r.startsWith(n))&&!l.dataRef.current.disabled}),o=s?e.items.indexOf(s):-1;return o===-1||o===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:o,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let a=_(e,n=>[...n,{id:t.id,dataRef:t.dataRef}]);return{...e,...a}},6:(e,t)=>{let a=_(e,n=>{let s=n.findIndex(o=>o.id===t.id);return s!==-1&&n.splice(s,1),n});return{...e,...a,activationTrigger:1}}},H=m.createContext(null);H.displayName="MenuContext";function L(e){let t=m.useContext(H);if(t===null){let a=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,L),a}return t}function De(e,t){return re(t.type,Le,e,t)}let Ae=m.Fragment;function _e(e,t){let{__demoMode:a=!1,...n}=e,s=m.useReducer(De,{__demoMode:a,menuState:a?0:1,buttonRef:m.createRef(),itemsRef:m.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:o,itemsRef:l,buttonRef:r},c]=s,d=C(t);ge([r,l],(g,S)=>{var v;c({type:1}),Se(S,Re.Loose)||(g.preventDefault(),(v=r.current)==null||v.focus())},o===0);let f=j(()=>{c({type:1})}),p=m.useMemo(()=>({open:o===0,close:f}),[o,f]),x={ref:d};return G.createElement(H.Provider,{value:s},G.createElement(be,{value:re(o,{0:F.Open,1:F.Closed})},O({ourProps:x,theirProps:n,slot:p,defaultTag:Ae,name:"Menu"})))}let Ue="button";function Be(e,t){var a;let n=V(),{id:s=`headlessui-menu-button-${n}`,...o}=e,[l,r]=L("Menu.Button"),c=C(l.buttonRef,t),d=ne(),f=j(v=>{switch(v.key){case b.Space:case b.Enter:case b.ArrowDown:v.preventDefault(),v.stopPropagation(),r({type:0}),d.nextFrame(()=>r({type:2,focus:R.First}));break;case b.ArrowUp:v.preventDefault(),v.stopPropagation(),r({type:0}),d.nextFrame(()=>r({type:2,focus:R.Last}));break}}),p=j(v=>{switch(v.key){case b.Space:v.preventDefault();break}}),x=j(v=>{if(Ne(v.currentTarget))return v.preventDefault();e.disabled||(l.menuState===0?(r({type:1}),d.nextFrame(()=>{var y;return(y=l.buttonRef.current)==null?void 0:y.focus({preventScroll:!0})})):(v.preventDefault(),r({type:0})))}),g=m.useMemo(()=>({open:l.menuState===0}),[l]),S={ref:c,id:s,type:Ie(e,l.buttonRef),"aria-haspopup":"menu","aria-controls":(a=l.itemsRef.current)==null?void 0:a.id,"aria-expanded":l.menuState===0,onKeyDown:f,onKeyUp:p,onClick:x};return O({ourProps:S,theirProps:o,slot:g,defaultTag:Ue,name:"Menu.Button"})}let Qe="div",Je=W.RenderStrategy|W.Static;function Ve(e,t){var a,n;let s=V(),{id:o=`headlessui-menu-items-${s}`,...l}=e,[r,c]=L("Menu.Items"),d=C(r.itemsRef,t),f=Pe(r.itemsRef),p=ne(),x=ye(),g=x!==null?(x&F.Open)===F.Open:r.menuState===0;m.useEffect(()=>{let u=r.itemsRef.current;u&&r.menuState===0&&u!==(f==null?void 0:f.activeElement)&&u.focus({preventScroll:!0})},[r.menuState,r.itemsRef,f]),ke({container:r.itemsRef.current,enabled:r.menuState===0,accept(u){return u.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}});let S=j(u=>{var I,w;switch(p.dispose(),u.key){case b.Space:if(r.searchQuery!=="")return u.preventDefault(),u.stopPropagation(),c({type:3,value:u.key});case b.Enter:if(u.preventDefault(),u.stopPropagation(),c({type:1}),r.activeItemIndex!==null){let{dataRef:h}=r.items[r.activeItemIndex];(w=(I=h.current)==null?void 0:I.domRef.current)==null||w.click()}se(r.buttonRef.current);break;case b.ArrowDown:return u.preventDefault(),u.stopPropagation(),c({type:2,focus:R.Next});case b.ArrowUp:return u.preventDefault(),u.stopPropagation(),c({type:2,focus:R.Previous});case b.Home:case b.PageUp:return u.preventDefault(),u.stopPropagation(),c({type:2,focus:R.First});case b.End:case b.PageDown:return u.preventDefault(),u.stopPropagation(),c({type:2,focus:R.Last});case b.Escape:u.preventDefault(),u.stopPropagation(),c({type:1}),U().nextFrame(()=>{var h;return(h=r.buttonRef.current)==null?void 0:h.focus({preventScroll:!0})});break;case b.Tab:u.preventDefault(),u.stopPropagation(),c({type:1}),U().nextFrame(()=>{we(r.buttonRef.current,u.shiftKey?X.Previous:X.Next)});break;default:u.key.length===1&&(c({type:3,value:u.key}),p.setTimeout(()=>c({type:4}),350));break}}),v=j(u=>{switch(u.key){case b.Space:u.preventDefault();break}}),y=m.useMemo(()=>({open:r.menuState===0}),[r]),N={"aria-activedescendant":r.activeItemIndex===null||(a=r.items[r.activeItemIndex])==null?void 0:a.id,"aria-labelledby":(n=r.buttonRef.current)==null?void 0:n.id,id:o,onKeyDown:S,onKeyUp:v,role:"menu",tabIndex:0,ref:d};return O({ourProps:N,theirProps:l,slot:y,defaultTag:Qe,features:Je,visible:g,name:"Menu.Items"})}let He=m.Fragment;function Ke(e,t){let a=V(),{id:n=`headlessui-menu-item-${a}`,disabled:s=!1,...o}=e,[l,r]=L("Menu.Item"),c=l.activeItemIndex!==null?l.items[l.activeItemIndex].id===n:!1,d=m.useRef(null),f=C(t,d);E(()=>{if(l.__demoMode||l.menuState!==0||!c||l.activationTrigger===0)return;let h=U();return h.requestAnimationFrame(()=>{var D,K;(K=(D=d.current)==null?void 0:D.scrollIntoView)==null||K.call(D,{block:"nearest"})}),h.dispose},[l.__demoMode,d,c,l.menuState,l.activationTrigger,l.activeItemIndex]);let p=$e(d),x=m.useRef({disabled:s,domRef:d,get textValue(){return p()}});E(()=>{x.current.disabled=s},[x,s]),E(()=>(r({type:5,id:n,dataRef:x}),()=>r({type:6,id:n})),[x,n]);let g=j(()=>{r({type:1})}),S=j(h=>{if(s)return h.preventDefault();r({type:1}),se(l.buttonRef.current)}),v=j(()=>{if(s)return r({type:2,focus:R.Nothing});r({type:2,focus:R.Specific,id:n})}),y=Me(),N=j(h=>y.update(h)),u=j(h=>{y.wasMoved(h)&&(s||c||r({type:2,focus:R.Specific,id:n,trigger:0}))}),I=j(h=>{y.wasMoved(h)&&(s||c&&r({type:2,focus:R.Nothing}))}),w=m.useMemo(()=>({active:c,disabled:s,close:g}),[c,s,g]);return O({ourProps:{id:n,ref:f,role:"menuitem",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,disabled:void 0,onClick:S,onFocus:v,onPointerEnter:N,onMouseEnter:N,onPointerMove:u,onMouseMove:u,onPointerLeave:I,onMouseLeave:I},theirProps:o,slot:w,defaultTag:He,name:"Menu.Item"})}let Ge=T(_e),ze=T(Be),We=T(Ve),Xe=T(Ke),$=Object.assign(Ge,{Button:ze,Items:We,Item:Xe});var B=new Map,M=new WeakMap,q=0,qe=void 0;function Ye(e){return e?(M.has(e)||(q+=1,M.set(e,q.toString())),M.get(e)):"0"}function Ze(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?Ye(e.root):e[t]}`).toString()}function et(e){const t=Ze(e);let a=B.get(t);if(!a){const n=new Map;let s;const o=new IntersectionObserver(l=>{l.forEach(r=>{var c;const d=r.isIntersecting&&s.some(f=>r.intersectionRatio>=f);e.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=d),(c=n.get(r.target))==null||c.forEach(f=>{f(d,r)})})},e);s=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),a={id:t,observer:o,elements:n},B.set(t,a)}return a}function tt(e,t,a={},n=qe){if(typeof window.IntersectionObserver>"u"&&n!==void 0){const c=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:typeof a.threshold=="number"?a.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:s,observer:o,elements:l}=et(a),r=l.get(e)||[];return l.has(e)||l.set(e,r),r.push(t),o.observe(e),function(){r.splice(r.indexOf(t),1),r.length===0&&(l.delete(e),o.unobserve(e)),l.size===0&&(o.disconnect(),B.delete(s))}}function rt({threshold:e,delay:t,trackVisibility:a,rootMargin:n,root:s,triggerOnce:o,skip:l,initialInView:r,fallbackInView:c,onChange:d}={}){var f;const[p,x]=m.useState(null),g=m.useRef(d),[S,v]=m.useState({inView:!!r,entry:void 0});g.current=d,m.useEffect(()=>{if(l||!p)return;let I;return I=tt(p,(w,h)=>{v({inView:w,entry:h}),g.current&&g.current(w,h),h.isIntersecting&&o&&I&&(I(),I=void 0)},{root:s,rootMargin:n,threshold:e,trackVisibility:a,delay:t},c),()=>{I&&I()}},[Array.isArray(e)?e.toString():e,p,s,n,o,l,a,c,t]);const y=(f=S.entry)==null?void 0:f.target,N=m.useRef(void 0);!p&&y&&!o&&!l&&N.current!==y&&(N.current=y,v({inView:!!r,entry:void 0}));const u=[x,S.inView,S.entry];return u.ref=u[0],u.inView=u[1],u.entry=u[2],u}const P="filter.";function nt({filters:e,appliedFilters:t=[],children:a,collections:n=[]}){const[s,o]=m.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsx("button",{onClick:()=>o(!s),className:"relative flex items-center justify-center w-8 h-8 focus:ring-primary/5",children:i.jsx(pe,{})}),i.jsx(dt,{})]}),i.jsxs("div",{className:"flex flex-col flex-wrap md:flex-row",children:[i.jsx("div",{className:`transition-all duration-200 ${s?"opacity-100 min-w-full md:min-w-[240px] md:w-[240px] md:pr-8 max-h-full":"opacity-0 md:min-w-[0px] md:w-[0px] pr-0 max-h-0 md:max-h-full"}`,children:i.jsx(st,{filters:e,appliedFilters:t})}),i.jsx("div",{className:"flex-1",children:a})]})]})}function st({filters:e=[],appliedFilters:t=[]}){const[a]=Q(),n=k(),s=(o,l)=>{switch(o.type){case"PRICE_RANGE":const r=a.get(`${P}price`),c=r?JSON.parse(r):void 0,d=isNaN(Number(c==null?void 0:c.min))?void 0:Number(c==null?void 0:c.min),f=isNaN(Number(c==null?void 0:c.max))?void 0:Number(c==null?void 0:c.max);return i.jsx(ut,{min:d,max:f});default:const p=lt(l.input,a,n);return i.jsx(J,{className:"focus:underline hover:underline",prefetch:"intent",to:p,children:l.label})}};return i.jsx(i.Fragment,{children:i.jsxs("nav",{className:"py-8",children:[t.length>0?i.jsx("div",{className:"pb-8",children:i.jsx(at,{filters:t})}):null,i.jsx(Z,{as:"h4",size:"lead",className:"pb-4",children:"Filter By"}),i.jsx("div",{className:"divide-y",children:e.map(o=>i.jsx(A,{as:"div",className:"w-full",children:({open:l})=>{var r;return i.jsxs(i.Fragment,{children:[i.jsxs(A.Button,{className:"flex justify-between w-full py-4",children:[i.jsx(ee,{size:"lead",children:o.label}),i.jsx(te,{direction:l?"up":"down"})]}),i.jsx(A.Panel,{children:i.jsx("ul",{className:"py-2",children:(r=o.values)==null?void 0:r.map(c=>i.jsx("li",{className:"pb-4",children:s(o,c)},c.id))},o.id)},o.id)]})}},o.id))})]})})}function at({filters:e=[]}){const[t]=Q(),a=k();return i.jsxs(i.Fragment,{children:[i.jsx(Z,{as:"h4",size:"lead",className:"pb-4",children:"Applied filters"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(n=>i.jsxs(J,{to:it(n,t,a),className:"flex px-2 border rounded-full gap",children:[i.jsx("span",{className:"flex-grow",children:n.label}),i.jsx("span",{children:i.jsx(ve,{})})]},`${n.label}-${JSON.stringify(n.filter)}`))})]})}function it(e,t,a){const n=new URLSearchParams(t);return Object.entries(e.filter).forEach(([s,o])=>{const l=P+s;n.delete(l,JSON.stringify(o))}),n.delete("cursor"),n.delete("direction"),`${a.pathname}?${n.toString()}`}function ot(e,t,a){return t.set("sort",e),t.delete("cursor"),t.delete("direction"),`${a.pathname}?${t.toString()}`}function lt(e,t,a){const n=new URLSearchParams(t),s=ae(e,n);return s.delete("cursor"),s.delete("direction"),`${a.pathname}?${s.toString()}`}const ct=500;function ut({max:e,min:t}){const a=k(),n=m.useMemo(()=>new URLSearchParams(a.search),[a.search]),s=Y(),[o,l]=m.useState(t),[r,c]=m.useState(e);xe(()=>{if(o===void 0&&r===void 0){n.delete(`${P}price`),s(`${a.pathname}?${n.toString()}`);return}const p={...o===void 0?{}:{min:o},...r===void 0?{}:{max:r}},x=ae({price:p},n);s(`${a.pathname}?${x.toString()}`)},ct,[o,r]);const d=p=>{const x=p.target.value,g=Number.isNaN(parseFloat(x))?void 0:parseFloat(x);c(g)},f=p=>{const x=p.target.value,g=Number.isNaN(parseFloat(x))?void 0:parseFloat(x);l(g)};return i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("label",{className:"mb-4",children:[i.jsx("span",{children:"from"}),i.jsx("input",{name:"minPrice",className:"text-black",type:"number",value:o??"",placeholder:"$",onChange:f})]}),i.jsxs("label",{children:[i.jsx("span",{children:"to"}),i.jsx("input",{name:"maxPrice",className:"text-black",type:"number",value:r??"",placeholder:"$",onChange:d})]})]})}function ae(e,t){const a=typeof e=="string"?JSON.parse(e):e;return Object.entries(a).forEach(([n,s])=>{t.has(`${P}${n}`,JSON.stringify(s))||(n==="price"?t.set(`${P}${n}`,JSON.stringify(s)):t.append(`${P}${n}`,JSON.stringify(s)))}),t}function dt(){const e=[{label:"Featured",key:"featured"},{label:"Price: Low - High",key:"price-low-high"},{label:"Price: High - Low",key:"price-high-low"},{label:"Best Selling",key:"best-selling"},{label:"Newest",key:"newest"}],[t]=Q(),a=k(),n=e.find(s=>s.key===t.get("sort"));return i.jsxs($,{as:"div",className:"relative z-40",children:[i.jsxs($.Button,{className:"flex items-center",children:[i.jsxs("span",{className:"px-2",children:[i.jsx("span",{className:"px-2 font-medium",children:"Sort by:"}),i.jsx("span",{children:(n||e[0]).label})]}),i.jsx(te,{})]}),i.jsx($.Items,{as:"nav",className:"absolute right-0 flex flex-col p-4 text-right rounded-sm bg-contrast",children:e.map(s=>i.jsx($.Item,{children:()=>i.jsx(J,{className:`block text-sm pb-2 px-3 ${(n==null?void 0:n.key)===s.key?"font-bold":"font-normal"}`,to:ot(s.key,t,a),children:s.label})},s.label))})]})}const Et=({matches:e})=>ce(...e.map(t=>t.data.seo));function Ft(){const{collection:e,collections:t,appliedFilters:a}=ie(),{ref:n,inView:s}=rt();return i.jsxs(i.Fragment,{children:[i.jsx(ue,{heading:e.title,children:(e==null?void 0:e.description)&&i.jsx("div",{className:"flex items-baseline justify-between w-full",children:i.jsx("div",{children:i.jsx(ee,{format:!0,width:"narrow",as:"p",className:"inline-block",children:e.description})})})}),i.jsx(de,{children:i.jsx(nt,{filters:e.products.filters,appliedFilters:a,collections:t,children:i.jsx(oe,{connection:e.products,children:({nodes:o,isLoading:l,PreviousLink:r,NextLink:c,nextPageUrl:d,hasNextPage:f,state:p})=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex items-center justify-center mb-6",children:i.jsx(z,{as:r,variant:"secondary",width:"full",children:l?"Loading...":"Load previous"})}),i.jsx(mt,{nodes:o,inView:s,nextPageUrl:d,hasNextPage:f,state:p}),i.jsx("div",{className:"flex items-center justify-center mt-6",children:i.jsx(z,{ref:n,as:c,variant:"secondary",width:"full",children:l?"Loading...":"Load more products"})})]})})})}),i.jsx(le.CollectionView,{data:{collection:{id:e.id,handle:e.handle}}})]})}function mt({nodes:e,inView:t,nextPageUrl:a,hasNextPage:n,state:s}){const o=Y();return m.useEffect(()=>{t&&n&&o(a,{replace:!0,preventScrollReset:!0,state:s})},[t,o,s,a,n]),i.jsx(me,{layout:"products","data-test":"product-grid",children:e.map((l,r)=>i.jsx(fe,{product:l,loading:Fe(r)},l.id))})}export{Ft as default,Et as meta};
